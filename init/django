NAME="test"
PROJECT_DIR="$HOME/test/django"

VIRTUALENV="$HOME/test/env"
# Do not change anything below unless you know what you do

PIDFILE="$PROJECT_DIR/$NAME.pid"
DAEMON="$VIRTUALENV/bin/gunicorn"

 
OPTS="testproject.wsgi -w 4 -b 127.0.0.1:9999 --error-logfile $PROJECT_DIR/gunicorn.log -D --pid=$PIDFILE"

fail () {
    echo "failed!"
    exit 1
}

success () {
    echo "$NAME."
}

case "$1" in
  start)
      echo -n "Starting $NAME: "
      if cd $PROJECT_DIR && $DAEMON $OPTS; then
        success
      else
        fail
      fi
    ;;
  stop)
      echo -n "Stopping $NAME: "
      if kill -QUIT `cat $PIDFILE`; then
        success
      else
        fail
      fi
    ;;
  restart)
      $0 stop
      $0 start
    ;;
  *)
      echo "Usage: $0 {start|stop|restart}"
      exit 1
esac

